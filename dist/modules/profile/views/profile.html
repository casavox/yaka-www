<style type="text/css">
    #map_canvas {
        height: 327px;
        width: calc(100% + 30px);
        margin-left: -15px;
        margin-right: -15px;
    }

    #map_canvas {
        position: relative;
    }

    .angular-google-map-container {
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        left: 0;
    }
</style>
<section class="view">
    <div class="header-menu">
        <ng-include src="'/modules/core/modules/menu/views/menuHamburger.html'"></ng-include>
        <div class="title">
            PROFILE
        </div>

        <a ui-sref="login">
            <div class="logout">
                Log Out
            </div>
        </a>
    </div>
    <div class="page-content">
        <div class="content-slide p-20">
            <div class="row">
                <div class="col-md-12"
                     ng-show="!vm.profileInfo.user.firstName || !vm.profileInfo.user.lastName || !vm.profileInfo.phoneNumber || !vm.profileInfo.user.profile.email || !vm.profileInfo.company.name || !vm.profileInfo.company.siret || !vm.profileInfo.company.address.address || !vm.profileInfo.company.phone || !vm.about.aboutMe || vm.indexOfObject('RGE', 'name', vm.verifications).length == 0 || vm.indexOfObject('PARTNER', 'name', vm.verifications).length == 0 || vm.indexOfObject('INSURANCE', 'name', vm.verifications).length == 0">
                    <div class="profile-info-warning">
                        <p>
                            Informations underlined in red are missing to post a job.
                        </p>

                        <p>
                            A complete profile increases the chances of being answered.
                        </p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="menu-category profile-info">
                        <div class="profile-box">
                            <p>
                                Informations générales
                            </p>

                            <div class="row">
                                <div class="col-md-3">
                                    <div class="img-profile">
                                        <cl-image public-id="{{vm.profileInfo.avatar.cloudinaryPublicId}}"
                                                  secure="true" format="png"
                                                  class="img-circle center-middle pro-icon"
                                                  ng-show="vm.profileInfo.avatar.cloudinaryPublicId">
                                            <cl-transformation height="92" width="92" crop="fill"/>
                                        </cl-image>
                                        <div class="img-default center"
                                             ng-show="!vm.profileInfo.avatar.cloudinaryPublicId">
                                            {{vm.profileInfo.user.firstName[0] | uppercase}} {{vm.profileInfo.user.lastName[0] |
                                            uppercase}}
                                        </div>
                                        <div class="icon-edit cursor-pointer"
                                             ngf-select="vm.uploadProfile($files, $invalidFiles, 0)"
                                             ngf-accept="'image/*'" ngf-max-size="5MB">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <md-input-container style="width:100%">
                                        <label>Gender</label>
                                        <md-select ng-model="vm.profileInfo.gender"
                                                   ng-class="{'border-red': !vm.profileInfo.gender}">
                                            <md-option  value="madame">{{"Madame" | translate}}</md-option>
                                            <md-option  value="sir">{{"Sir" | translate}}</md-option>
                                        </md-select>
                                    </md-input-container>
                                    <md-input-container class="md-block" flex-gt-sm="">
                                        <label>First name</label>
                                        <input ng-model="vm.profileInfo.user.firstName"
                                               ng-class="{'border-red': !vm.profileInfo.firstName}">
                                    </md-input-container>
                                    <md-input-container class="md-block" flex-gt-sm="">
                                        <label>Last name</label>
                                        <input ng-model="vm.profileInfo.user.lastName"
                                               ng-class="{'border-red': !vm.profileInfo.lastName}">
                                    </md-input-container>
                                </div>
                            </div>
                            <md-input-container class="md-block" flex-gt-sm="">
                                <label>Mobile phone</label>
                                <input type="text" international-phone-number ng-model="vm.profileInfo.phoneNumber"
                                       ng-class="{'border-red': !vm.profileInfo.phoneNumber}" default-country="fr"
                                       preferred-countries="fr, en" utilsScript="''" autoFormat="true">
                            </md-input-container>
                            <md-input-container class="md-block" flex-gt-sm="">
                                <label>Email</label>
                                <input ng-model="vm.profileInfo.user.profile.email"
                                       ng-class="{'border-red': !vm.profileInfo.profile.email}">
                            </md-input-container>
                            <md-input-container class="md-block" flex-gt-sm="">
                                <label>Address</label>
                                <input vs-google-autocomplete="options"
                                       options="options"
                                       ng-model="vm.profileInfo.company.address.address"
                                       vs-place="address.place"
                                       vs-place-id="address.components.placeId"
                                       vs-street-number="address.components.streetNumber"
                                       vs-street="address.components.street"
                                       vs-city="address.components.city"
                                       vs-state="address.components.state"
                                       vs-country-short="address.components.countryCode"
                                       vs-country="address.components.country"
                                       vs-post-code="address.components.postCode"
                                       vs-district="address.components.district"
                                       vs-latitude="address.components.location.lat"
                                       vs-longitude="address.components.location.long"
                                       type="text"
                                       name="address"
                                       id="address"
                                       ng-class="{'border-red': !vm.profileInfo.address.address}">
                                <!-- <input ng-model="vm.profileInfo.company.address.address" ng-class="{'border-red': !vm.profileInfo.company.address.address}"> -->
                            </md-input-container>
                            <p class="error center" ng-show="vm.error.profile.flag">
                                {{vm.error.profile.message}}
                            </p>

                            <div class="profile-box-footer">
                                <div class="profile-box-footer-btn-fr" ng-click="vm.updateProfile()">
                                    Save
                                </div>
                                <div class="profile-box-footer-btn-fr cancel" ng-click="vm.cancelProfile()">
                                    Cancel
                                </div>
                            </div>
                        </div>
                    </div>

                </div>


                <div class="col-md-6">
                    <div class="menu-category profile-about">
                        <div class="profile-box">
                            <p>
                                About me
                            </p>
                            <md-input-container class="md-block h-a mb-0">
                                <label></label>
                                <textarea
                                    placeholder="Dévrivez vous ainsi que vos méthodes de travail. Expliquez à vos clients pourquoi ils doivent vous embuacher plutôt qu’un autre artisan."
                                    ng-model="vm.about.aboutMe" ng-class="{'border-red': !vm.about.aboutMe}"
                                    md-select-on-focus></textarea>
                            </md-input-container>
                            <div class="profile-box-footer">
                                <div class="profile-box-footer-btn-fr" ng-click="vm.updateAboutMe()">
                                    Save
                                </div>
                                <div class="profile-box-footer-btn-fr cancel" ng-click="vm.cancelAboutMe()">
                                    Cancel
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="menu-category profile-about">
                        <div class="profile-box">
                            <p>
                                Change password
                            </p>
                            <md-input-container class="md-block mt-10" flex-gt-sm="">
                                <label>Current password</label>
                                <input type="password" ng-model="vm.pwdCurrent">
                            </md-input-container>
                            <md-input-container class="md-block mt-10" flex-gt-sm="">
                                <label>New password</label>
                                <input type="password" ng-model="vm.pwd1">
                            </md-input-container>
                            <md-input-container class="md-block mt-10" flex-gt-sm="">
                                <label>Confirm password</label>
                                <input type="password" ng-model="vm.pwd2" ng-class="{'border-red': vm.pwd1 != vm.pwd2}">
                            </md-input-container>
                            <p class="error center" ng-show="vm.error.password.flag">
                                {{vm.error.password.message}}
                            </p>

                            <div class="profile-box-footer mt-12">
                                <div class="profile-box-footer-btn-fr" ng-click="vm.changePassword()">
                                    Save
                                </div>
                            </div>
                        </div>
                    </div>
               </div>
            </div>
        </div>
</section>
