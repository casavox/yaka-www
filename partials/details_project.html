
<style type="text/css">
  html, body, #map_canvas {
    height: 70px;
    width: 100%;
    margin: 0px;
  }

  #map_canvas {
    position: relative;
  }

  .angular-google-map-container {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
  }
</style>
<section class="view">
  <div class="header-menu">
    <ng-include src="'partials/menuHamburger.html'"></ng-include>
    <div class="title">
      MY PROJECTS
    </div>
    <a ui-sref="new-project"><button type="button" class="post-job-projects btn">Post a job</button></a>
    <a ui-sref="login"><div class="logout">
      Log Out
    </div>
  </a>
</div>
<div class="page-content">
  <ng-include src="'partials/menu.html'"></ng-include>
  <div class="content-slide">
    <div class="nav-header no-margin">
      <div class="in-line min-w-44">
        <img src="icons/mdpi/arrow-left.png" alt="" ng-click="vm.prev()"/>
      </div>
      <div class="in-line ml-20">
        <h2 class="no-margin">SELECT YOUR PRO</h2>
        <p>
          {{vm.project.title}}
        </p>
      </div>
    </div>
    <div class="nav-tab">
      <div class="tab" ng-class="{'tab-active': vm.pro}" ng-click="vm.pro = true">
        Proposals
      </div>
      <div class="tab" ng-class="{'tab-active': !vm.pro}" ng-click="vm.pro = false">
        Project
      </div>
    </div>
    <div ng-show="vm.pro">
      <div class="detail-pro-title">
        <div class="in-line">
          ORDERS
        </div>
        <hr>
      </div>
      <div class="detail-pro-message-box" ng-show="!vm.project.proposals || vm.project.proposals.length == 0">
        <p>
          Find all offers made by professionnals interested about your project
        </p>
      </div>
      <div class="detail-pro-title">
        <div class="in-line">
          SUGGESTIONS
        </div>
        <hr class="w-555">
      </div>
      <div class="detail-pro-message-box" ng-show="!vm.project.proposals || vm.project.proposals.length == 0">
        <p>
          Suggested pro that fit your queries
          You can contact them and ask for a quote
        </p>
      </div>
    </div>
    <div class="project-description" ng-show="!vm.pro">
      <div class="row no-margin">
        <div class="col-xs-12">
          <div class="description-action-btn" ng-click="vm.edit()">
            MODIFY
          </div>
          <div class="description-action-btn">
            DELETE
          </div>
          <div class="description-action-btn">
            UNPUBLISH
          </div>
          <div class="description-date">
            Post {{vm.project.published | date:'dd MMMM yyyy'}}
          </div>
        </div>
      </div>
      <div class="row no-margin">
        <div class="col-xs-12 ">
          <div id="map_canvas">
            <ui-gmap-google-map center="map.center" zoom="map.zoom" options="options"></ui-gmap-google-map>
          </div>
        </div>
      </div>
      <div class="row no-margin">
        <div class="col-xs-12 row no-margin">
          <div class="col-xs-12 description-sub-title">
            Where
            <span class="icon-pen-red" ng-show="vm.editFlag" ng-click="vm.editWhere()"></span>
          </div>
          <div class="col-xs-12 description-sub-text">
            {{vm.project.address.name}}
          </div>

        </div>
      </div>
      <div class="row no-margin">
        <div class="col-xs-12 row no-margin">
          <div class="col-xs-12 description-sub-title">
            When
            <span class="icon-pen-red" ng-show="vm.editFlag" ng-click="vm.editWhen()"></span>
          </div>
          <div class="col-xs-12 description-sub-text">
            {{vm.getWhen()}}
          </div>
        </div>
      </div>
      <div class="row no-margin">
        <div class="col-xs-12 row no-margin">
          <div class="col-xs-12 description-sub-title">
            Tags
          </div>
          <div class="col-xs-12 description-sub-text">
            {{vm.getTags()}}
          </div>
        </div>
      </div>
      <div class="row no-margin">
        <div class="col-xs-12 row no-margin">
          <div class="col-xs-12 description-sub-title">
            Description
            <span class="icon-pen-red" ng-show="vm.editFlag" ng-click="vm.editDescription()"></span>
          </div>
          <div class="col-xs-12 description-sub-text">
            <textarea msd-elastic class="custom-textarea" disabled ng-model="vm.project.description" ng-hide="vm.editDescriptionFlag"></textarea>
            <textarea class="form-control" ng-model="vm.project.description" ng-show="vm.editDescriptionFlag"></textarea>
          </div>
        </div>
      </div>
      <div class="row no-margin">
        <div class="col-xs-12 row no-margin">
          <div class="col-xs-12 description-sub-title">
            Photos / Videos
          </div>
          <div class="col-xs-12 description-sub-text row mb-15">
            <div class="col-xs-3" ng-repeat="media in vm.project.images">
              <span class=" center-middle img-comment" ng-click="media.commentFlag = !media.commentFlag " ng-init="media.commentFlag = false" ng-show="media.description"></span>
              <cl-image public-id="{{media.cloudinaryPublicId}}" format="png" class="center">
                <cl-transformation height="92" width="92" crop="fill"/>
              </cl-image>
              <textarea msd-elastic class="custom-textarea w-100p" disabled ng-model="media.description" ng-show="media.commentFlag"></textarea>
            </div>
            <div class="col-md-3 no-padding"
            ngf-drop="vm.uploadFiles($files)"
            ngf-drag-over-class="dragOverClass($event)"
            ng-model="files"
            ng-multiple="false" ng-show="vm.editFlag">
            <div class="add-img-edit center" ngf-select="vm.uploadFiles($files, $invalidFiles, 0)"
            ngf-accept="'image/*'" ngf-max-size="5MB">
            <img class="center-middle" src="icons/mdpi/ic_new_request.png" alt=""/>
          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
<div class="popUp" ng-show="vm.trashFlag">
  <div class="popUp-container center-middle">
    <div class="popUp-content">
      <h4>Are you sure ? </h4>
      <p>
        It’s generally better to update or to draft a published project.
      </p>
    </div>
    <div class="popUp-footer">
      <div class="row no-margin">
        <div class="col-xs-9 fr" ng-click="vm.deleteProject()">
          Confirm
        </div>
        <div class="col-xs-3 text-center" ng-click="vm.trashFlag = false">
        Cancel
      </div>
    </div>
  </div>
</div>
</div>

<div class="popUp" ng-show="vm.draftFlag">
  <div class="popUp-container center-middle">
    <div class="popUp-content">
      <h4>Are you sure ? </h4>
      <p>
        Your project will be visible only for you, you will not receive anymore proposal (those already received will be invalided).
      </p>
    </div>
    <div class="popUp-footer">
      <div class="row no-margin">
        <div class="col-xs-9 fr" ng-click="vm.transformToDraft()">
          Confirm draft
        </div>
        <div class="col-xs-3 text-center" ng-click="vm.draftFlag = false">
        Keep posted
      </div>
    </div>
  </div>
</div>
</div>

<div class="popUp" ng-show="vm.whenFlag">
  <div class="popUp-container center-middle">
    <div class="popUp-content">
      <h4>When ?</h4>
      <div ng-show="vm.project.type == 'EMERGENCY'">
        <div class="row center no-margin w-500">
          <div class="col-xs-12 row line-date">


            <div class="col-xs-3">

            </div>
            <div class="col-xs-3">
              {{vm.J1.date | date:"EEE"}}
            </div>
            <div class="col-xs-3">
              {{vm.J2.date | date:"EEE"}}
            </div>
            <div class="col-xs-3">
              {{vm.J3.date | date:"EEE"}}
            </div>
          </div>
          <div class="col-xs-12 row line-date">
            <div class="col-xs-3">
              Toute la journée
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J1.all = !vm.J1.all; vm.all(vm.J1)" ng-init="vm.J1.all = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J1.all"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J2.all = !vm.J2.all; vm.all(vm.J2)" ng-init="vm.J2.all = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J2.all"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J3.all = !vm.J3.all; vm.all(vm.J3)" ng-init="vm.J3.all = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J3.all"></span>
              </div>
            </div>

          </div>
          <div class="col-xs-12 row line-date">
            <div class="col-xs-3">
              7h-9h
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J1.c1 = !vm.J1.c1; vm.J1.all = false" ng-class="vm.J1.c1Disabled" ng-init="vm.J1.c1 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J1.c1 && vm.J1.c1Disabled != 'checkbox-disabled'"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J2.c1 = !vm.J2.c1; vm.J2.all = false" ng-init="vm.J2.c1 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J2.c1"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J3.c1 = !vm.J3.c1; vm.J3.all = false" ng-init="vm.J3.c1 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J3.c1"></span>
              </div>
            </div>

          </div>
          <div class="col-xs-12 row line-date">
            <div class="col-xs-3">
              9h-12h
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J1.c2 = !vm.J1.c2; vm.J1.all = false" ng-class="vm.J1.c2Disabled" ng-init="vm.J1.c2 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J1.c2 && vm.J1.c2Disabled != 'checkbox-disabled'"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J2.c2 = !vm.J2.c2; vm.J2.all = false" ng-init="vm.J2.c2 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J2.c2"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J3.c3 = !vm.J3.c3; vm.J3.all = false" ng-init="vm.J3.c3 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J3.c3"></span>
              </div>
            </div>

          </div>
          <div class="col-xs-12 row line-date">
            <div class="col-xs-3">
              12h-14h
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J1.c3 = !vm.J1.c3; vm.J1.all = false" ng-class="vm.J1.c3Disabled" ng-init="vm.J1.c3 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J1.c3 && vm.J1.c3Disabled != 'checkbox-disabled'"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J2.c3 = !vm.J2.c3; vm.J2.all = false" ng-init="vm.J2.c3 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J2.c3"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J3.c3 = !vm.J3.c3; vm.J3.all = false" ng-init="vm.J3.c3 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J3.c3"></span>
              </div>
            </div>

          </div>
          <div class="col-xs-12 row line-date">
            <div class="col-xs-3">
              14h-16h
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J1.c4 = !vm.J1.c4; vm.J1.all = false" ng-class="vm.J1.c4Disabled" ng-init="vm.J1.c4 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J1.c4 && vm.J1.c4Disabled != 'checkbox-disabled'"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J2.c4 = !vm.J2.c4; vm.J2.all = false" ng-init="vm.J2.c4 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J2.c4"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J3.c4 = !vm.J3.c4; vm.J3.all = false" ng-init="vm.J3.c4 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J3.c4"></span>
              </div>
            </div>
          </div>
          <div class="col-xs-12 row line-date">
            <div class="col-xs-3">
              16h-18h
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J1.c5 = !vm.J1.c5; vm.J1.all = false" ng-class="vm.J1.c5Disabled" ng-init="vm.J1.c5 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J1.c5 && vm.J1.c5Disabled != 'checkbox-disabled'"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J2.c5 = !vm.J2.c5; vm.J2.all = false" ng-init="vm.J2.c5 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J2.c5"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J3.c5 = !vm.J3.c5; vm.J3.all = false" ng-init="vm.J3.c5 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J3.c5"></span>
              </div>
            </div>
          </div>
          <div class="col-xs-12 row line-date">
            <div class="col-xs-3">
              18h-20h
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J1.c6 = !vm.J1.c6; vm.J1.all = false" ng-class="vm.J1.c6Disabled" ng-init="vm.J1.c6 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J1.c6 && vm.J1.c6Disabled != 'checkbox-disabled'"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J2.c6 = !vm.J2.c6; vm.J2.all = false" ng-init="vm.J2.c6 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J2.c6"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J3.c6 = !vm.J3.c6; vm.J3.all = false" ng-init="vm.J3.c6 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J3.c6"></span>
              </div>
            </div>
          </div>
          <div class="col-xs-12 row line-date">
            <div class="col-xs-3">
              Après 20h
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J1.c7 = !vm.J1.c7; vm.J1.all = false" ng-init="vm.J1.c7 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J1.c7"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J2.c7 = !vm.J2.c7; vm.J2.all = false" ng-init="vm.J2.c7 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J2.c7"></span>
              </div>
            </div>
            <div class="col-xs-3">
              <div class="checkbox-style center-middle" ng-click="vm.J3.c7 = !vm.J3.c7; vm.J3.all = false" ng-init="vm.J3.c7 = false">
                <span class="glyphicon glyphicon-ok check" ng-show="vm.J3.c7"></span>
              </div>
            </div>

          </div>
        </div>
      </div>
      <div ng-show="vm.project.type != 'EMERGENCY'">
        <ul class="questions-ul center no-padding">
          <li class="question-li center" ng-class="vm.child0" ng-click="vm.selectDateType('SPECIFIC'); vm.selectDate(); vm.child0 = 'activate'; vm.child1 = ''; vm.child2 = ''; vm.child3 = ''">
            On a specific date
          </li>
          <li ng-show="vm.dateSelected" class="custom-li-date question-li center" ng-click="vm.unSelectdate()">
            {{vm.dt | date:'dd-MM-yyyy'}}
          </li>
          <li ng-show="vm.dateFlag">
            <div style="display:inline-block; min-height:290px;" class="center custom-picker">
              <uib-datepicker ng-model="vm.dt" min-date="vm.minDate" show-weeks="true" class="well well-sm custom-date" custom-class="getDayClass(date, mode)"></uib-datepicker>
            </div>
          </li>
          <li class="question-li center" ng-class="vm.child1" ng-click="vm.selectDateType('WITHIN_A_WEEK'); vm.child0 = ''; vm.child1 = 'activate'; vm.child2 = ''; vm.child3 = ''">
            Within a week
          </li>
          <li class="question-li center" ng-class="vm.child2" ng-click="vm.selectDateType('WITHIN_A_MONTH'); vm.child0 = ''; vm.child1 = ''; vm.child2 = 'activate'; vm.child3 = ''">
            Within a month
          </li>
          <li class="question-li center" ng-class="vm.child3" ng-click="vm.selectDateType('NONE'); vm.child0 = ''; vm.child1 = ''; vm.child2 = ''; vm.child3 = 'activate'">
            I am a flexible on the start date
          </li>
        </ul>
        <p class="error center" ng-show="vm.error.date.flag">
          {{vm.error.date.message}}
        </p>
      </div>
    </div>
    <div class="popUp-footer">
      <div class="row no-margin">
        <div class="col-xs-9 fr" ng-click="vm.changeWhen()">
          Confirm
        </div>
        <div class="col-xs-3 text-center" ng-click="vm.whenFlag = false">
        Cancel
      </div>
    </div>
  </div>
</div>
</div>
</section>
