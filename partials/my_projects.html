<section class="view">
  <div class="header-menu">
    <ng-include src="'partials/menuHamburger.html'"></ng-include>
    <div class="title">
      MY PROJECTS
    </div>
    <a ui-sref="new-project"><button type="button" class="post-job-projects btn">Post a job</button></a>
    <a ui-sref="login"><div class="logout">
      Log Out
    </div>
    </a>
  </div>
  <div class="page-content">
    <ng-include src="'partials/menu.html'"></ng-include>
    <div class="content-slide">
      <h4>IN PROGRESS</h4>
      <div class="project" ng-repeat="p in vm.projectsOnGoing" ng-click="vm.selectProject(p)" ng-ripple ng-class="{'emergency-border': p.type == 'EMERGENCY' && (p.unreadMessages || p.status == 'ONGOING_PROPOSITIONS_RECEIVED' || p.status == 'ONGOING_RATE_PRO'), 'alert-border': p.unreadMessages || p.status == 'ONGOING_PROPOSITIONS_RECEIVED' || p.status == 'ONGOING_RATE_PRO'}">
          <div class="project-icon no-margin no-padding">
            <div class="v-icon v-icon-{{p.icon}} center">
            </div>
          </div>
          <div class="project-info-middle no-margin no-padding" title="{{p.title}}">
            <div class="project-middle pl-20">
              <div class="title-line">
                <label ng-show="p.type == 'EMERGENCY'">Emergency - </label>
                <p class="project-title" ng-class="{'unread': p.unreadMessages, 'unread': p.status == 'ONGOING_PROPOSITIONS_RECEIVED' || p.status == 'ONGOING_RATE_PRO'}">
                  {{p.title}}
                </p>
              </div>

              <div class="info-line">
                <p class="project-date">
                  {{p.updated | date:'dd MMM yyyy'}} -
                </p>
                <p class="project-address">
                  {{p.address.name}}
                </p>
              </div>
            </div>
          </div>
          <div class="project-message no-margin no-padding">
            <img class="center img-message" src="icons/mdpi/ic_message.png" alt="" ng-show="p.unreadMessages"/>
            <p class="no-message" ng-hide="p.unreadMessages">
              No message
            </p>

            <p class="post-message" ng-show="p.unreadMessages">
              Posté depuis
            </p>
            <p class="post-message" ng-show="p.unreadMessages">
              {{vm.dateDiff(p.published, p.updated)}}
            </p>
          </div>
          <div class=" project-proposals no-margin no-padding">
            <div class="status-info" ng-show="p.status == 'ONGOING_PROPOSITIONS_RECEIVED' || p.status == 'ONGOING_WAITING_FOR_PROPOSITIONS' || p.status == 'DRAFT'">
              <p ng-show="p.status == 'ONGOING_PROPOSITIONS_RECEIVED'" ng-class="{'unread': p.unreadMessages || p.status == 'ONGOING_PROPOSITIONS_RECEIVED' || p.status == 'ONGOING_RATE_PRO'}">
                <i class="fa fa-circle  puce" ></i> {{p.proposals.length}} propositions
              </p>
              <p ng-show="p.status == 'ONGOING_PROS_PRESELECTED'"  ng-class="{'unread': p.unreadMessages || p.status == 'ONGOING_PROPOSITIONS_RECEIVED' || p.status == 'ONGOING_RATE_PRO'}">
                <i class="fa fa-circle  puce" ng-class="[p.status]"></i>Pro selected
              </p>
              <p ng-show="p.status == 'ONGOING_RATE_PRO'"  ng-class="{'unread': p.unreadMessages || p.status == 'ONGOING_PROPOSITIONS_RECEIVED' || p.status == 'ONGOING_RATE_PRO'}">
                <i class="fa fa-circle  puce" ng-class="[p.status]"></i>
              </p>
              <p ng-show="p.status == 'ONGOING_WAITING_FOR_PROPOSITIONS'" class="color-9b"  ng-class="{'unread': p.unreadMessages || p.status == 'ONGOING_PROPOSITIONS_RECEIVED' || p.status == 'ONGOING_RATE_PRO'}">
                <i class="fa fa-circle  puce" ng-class="[p.type, p.status]"></i> Waiting for proposals
              </p>
              <p ng-show="p.status == 'DRAFT'" class="color-9b"  ng-class="{'unread': p.unreadMessages || p.status == 'ONGOING_PROPOSITIONS_RECEIVED' || p.status == 'ONGOING_RATE_PRO'}">
                <i class="fa fa-circle  puce" ng-class="[p.type, p.status]"></i> Draft
              </p>
              <div class="row avatar-display " ng-show="p.proposals.length > 0">
                <div class="col-xs-3">
                  <img class="img-circle avatar-pro" ng-src="{{p.proposals[0].professional.avatarUrl}}" ng-show="p.proposals[0].professional.avatarUrl"/>
                  <div class="img-default-preview" ng-show="!p.proposals[0].professional.avatarUrl">
                    {{p.proposals[0].professional.firstName[0] | uppercase}} {{p.proposals[0].professional.lastName[0] | uppercase}}
                  </div>
                </div>
                <div class="col-xs-3" ng-show="p.proposals.length > 1">
                  <img class="img-circle avatar-pro" ng-src="{{p.proposals[1].professional.avatarUrl}}" ng-show="p.proposals[1].professional.avatarUrl"/>
                  <div class="img-default-preview" ng-show="!p.proposals[1].professional.avatarUrl">
                    {{p.proposals[1].professional.firstName[0] | uppercase}} {{p.proposals[1].professional.lastName[0] | uppercase}}
                  </div>
                </div>
                <div class="col-xs-3" ng-show="p.proposals.length > 2">
                  <img class="img-circle avatar-pro" ng-src="{{p.proposals[2].professional.avatarUrl}}" ng-show="p.proposals[2].professional.avatarUrl"/>
                  <div class="img-default-preview" ng-show="!p.proposals[2].professional.avatarUrl">
                    {{p.proposals[2].professional.firstName[0] | uppercase}} {{p.proposals[2].professional.lastName[0] | uppercase}}
                  </div>
                </div>
                <div class="col-xs-3" ng-show="p.proposals.length > 3">
                  <img class="img-circle avatar-pro" ng-src="{{p.proposals[3].professional.avatarUrl}}" ng-show="p.proposals[3].professional.avatarUrl"/>
                  <div class="img-default-preview" ng-show="!p.proposals[3].professional.avatarUrl">
                    {{p.proposals[3].professional.firstName[0] | uppercase}} {{p.proposals[3].professional.lastName[0] | uppercase}}
                  </div>
                </div>
              </div>
            </div>
            <div class="status-info"  ng-show="p.status == 'ONGOING_PROJECT_ONGOING' || p.status == 'ONGOING_PROS_PRESELECTED'">
              <p>
                Pro selected
              </p>
              <div class="row avatar-display " ng-show="p.proposals.length > 0">
                <div class="col-xs-12">
                  img class="img-circle avatar-pro mt-10" ng-src="{{p.professional.avatarUrl}}" alt="" /> {{p.professional.companyName}}
                </div>
              </div>
            </div>
          </div>

      </div>
      <h4>COMPLETED</h4>
      <div class="project" ng-repeat="p in vm.projectsCompleted">
        <div class="row no-margin no-padding">
          <div class="col-xs-2 no-margin no-padding">

          </div>
          <div class="col-xs-4 no-margin no-padding" title="{{p.title}}">
            <div class="project-middle pl-20">
              <div class="title-line">
                <label ng-show="p.type == 'EMERGENCY'">Emergency - </label>
                <p class="project-title">
                  {{p.title}}
                </p>
              </div>

              <div class="info-line">
                <p class="project-date">
                  {{p.updated | date:'mediumDate'}} -
                </p>
                <p class="project-address">
                  {{p.address.name}}
                </p>
              </div>
            </div>
          </div>
          <div class="col-xs-4 no-margin no-padding">
            <div class="status-info" ng-show="p.status == 'ONGOING_PROPOSITIONS_RECEIVED' || p.status == 'ONGOING_WAITING_FOR_PROPOSITIONS'">
              <p ng-show="p.status == 'ONGOING_PROPOSITIONS_RECEIVED'">
                <i class="fa fa-circle  puce" ng-class="p.type"></i> {{p.proposals.length}} propositions
              </p>
              <p ng-show="p.status == 'ONGOING_WAITING_FOR_PROPOSITIONS'">
                <i class="fa fa-circle  puce" ng-class="[p.type, p.status]"></i> 0 propositions
              </p>
              <div class="row avatar-display" ng-show="p.proposals.length > 0">
                <div class="col-xs-3">
                  <img class="img-circle avatar-pro fr" ng-src="{{p.proposals[0].professional.avatarUrl}}" alt="" />
                </div>
                <div class="col-xs-3" ng-show="p.proposals.length > 1">
                  <img class="img-circle avatar-pro center" ng-src="{{p.proposals[1].professional.avatarUrl}}" alt="" />
                </div>
                <div class="col-xs-3" ng-show="p.proposals.length > 2">
                  <img class="img-circle avatar-pro fl" ng-src="{{p.proposals[2].professional.avatarUrl}}" alt="" />
                </div>
                <div class="col-xs-3" ng-show="p.proposals.length > 3">
                  <span class="glyphicon glyphicon-option-horizontal other-avatars img-circle"></span>
                </div>
              </div>
            </div>
            <div class="status-info" ng-show="p.status == 'ONGOING_PROS_PRESELECTED'">
              <p>
                Pro selected
              </p>
              <p>
                {{p.professional.companyName}}
              </p>
            </div>
            <div class="status-info" ng-show="p.status == 'DRAFT'">
              <p>
                {{p.status}}
              </p>
            </div>
          </div>
          <div class="col-xs-2 no-margin no-padding">
            <img class="center-middle" src="icons/mdpi/ic_message.png" alt="" ng-show="p.unreadMessages"/>
            <img class="center-middle" src="icons/mdpi/ic_nomessage.png" alt="" ng-hide="p.unreadMessages"/>

            <p class="post-message">
              Posté depuis
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
