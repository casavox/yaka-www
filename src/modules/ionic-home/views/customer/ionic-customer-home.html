<div class="ionic-background c-white">
    <ion-content>
        <div class="row m-l-0 m-r-0 center row-center">
            <div class="col"></div>
            <div class="col t-center">
                <img class="clean-img" width="100" height="100" src="img/logo.png" alt="Casavox"/>
            </div>
            <div class="col"></div>


        </div>

        <div class="row m-l-0 m-r-0">
            <ion-slide-box on-slide-changed="slideHasChanged($index)">
                <ion-slide>
                    <div class="box blue full-width p-r-40">
                        <h2 class="t-center subtitle-color-forced">Etape 1</h2>
                        <div
                            class="chart chart1 center col-xs-12 subtitle-color-forced col-sm-3 no-padding circle-1-m-b m-t-45"
                            data-percent="0">
                            <i class="zmdi zmdi-assignment zmdi-hc-4x subtitle-color-forced"></i>

                            <div class="text-uppercase subtitle-color-forced subtext-circle  ">
                                Je publie <strong>mon besoin</strong></div>
                        </div>
                    </div>
                </ion-slide>
                <ion-slide>
                    <div class="box blue full-width p-r-40">
                        <h2 class="t-center subtitle-color-forced">Etape 2</h2>
                        <div
                            class="chart chart1 center col-xs-12 subtitle-color-forced col-sm-3 no-padding circle-1-m-b m-t-45"
                            data-percent="0">
                            <i class="zmdi zmdi-assignment zmdi-hc-4x subtitle-color-forced"></i>

                            <div class="text-uppercase subtitle-color-forced subtext-circle ">
                                CasaVOX et mon entourage me recommandent <strong>leurs meilleurs Pros</strong></div>
                        </div>
                    </div>
                </ion-slide>
                <ion-slide>
                    <div class="box blue full-width p-r-40">
                        <h2 class="t-center subtitle-color-forced">Etape 3</h2>
                        <div
                            class="chart chart1 center col-xs-12 subtitle-color-forced col-sm-3 no-padding circle-1-m-b m-t-45"
                            data-percent="0">
                            <i class="zmdi zmdi-assignment zmdi-hc-4x subtitle-color-forced"></i>

                            <div class="text-uppercase subtitle-color-forced subtext-circle ">
                                J'échange <strong>en privé avec les Pros de mon choix</strong><br>
                                (Messages, photos, devis...)
                            </div>
                        </div>
                    </div>
                </ion-slide>
                <ion-slide>
                    <div class="box blue full-width p-r-40">
                        <h2 class="t-center subtitle-color-forced">Etape 4</h2>
                        <div
                            class="chart chart1 center col-xs-12 subtitle-color-forced col-sm-3 no-padding circle-1-m-b m-t-45"
                            data-percent="0">
                            <i class="zmdi zmdi-assignment zmdi-hc-4x subtitle-color-forced"></i>

                            <div class="text-uppercase subtitle-color-forced subtext-circle ">
                                Je choisis mon Pro<br>
                                <strong>Je suis mes travaux avec CasaVOX</strong></div>
                        </div>
                    </div>
                </ion-slide>
            </ion-slide-box>
        </div>

        <button class="button button-positive bgm-facebook center"
                data-ng-click="vm.facebookLogin()">
            Connexion via Facebook
        </button>

        <div class="row m-l-0 m-r-0 center">
            <h5 class="col t-center subtitle-color-forced underline"
                ng-click="vm.login.show()">Se connecter avec son Email</h5>
        </div>

        <div class="row m-l-0 m-r-0 center">
            <h6 class="col t-center subtitle-color-forced">Vous êtes un <b><span class="c-orange">Pro</span></b> ?</br>
                <u><b>Télécharger l'application CasaVox pour les Pros</b></u></h6>
        </div>
    </ion-content>
</div>


<script id="login-popup.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar>
            <h1 class="title">CASAVOX</h1>
            <img class="popupCloseButton popupCloseIonic" data-ng-if="!vm.noSocialAccountMessage"
                 src="icons/mdpi/ic_popup_close.png"
                 data-ng-click="vm.login.hide()" alt=""/>
        </ion-header-bar>
        <ion-content>
            <div class="container">
                <div id="loginPopup" class="yakaPopupWindow col-xs-12" data-ng-click="$event.stopPropagation()">
                    <div data-ng-if="!vm.noSocialAccountMessage">
                        <div class="loginPopupTabItem col-xs-6" data-ng-class="{loginPopupTabItemActive: vm.loginTab}"
                             data-ng-click="vm.loginTab = true">
                            CONNEXION
                        </div>
                        <div class="loginPopupTabItem col-xs-6" data-ng-class="{loginPopupTabItemActive: !vm.loginTab}"
                             data-ng-click="vm.loginTab = false">
                            INSCRIPTION
                        </div>

                        <div data-ng-show="vm.loginTab">
                            <form name="loginForm" class="col-xs-12 no-padding">
                                <div class="form-group fg-float"
                                     data-ng-class="{'has-error' : vm.formLoginError && !vm.loginUser.email}">
                                    <div class="fg-line m-t-10">
                                        <input class="form-control fg-input"
                                               type="text"
                                               name="email"
                                               autocomplete="username"
                                               data-ng-model="vm.loginUser.email"
                                               data-ng-keyup="$event.keyCode == 13 && vm.loginFormIsValid() && vm.login()"
                                               yaka-input-email/>
                                        <label class="fg-label">Email</label>
                                    </div>
                                    <small class="help-block"
                                           data-ng-show="vm.formLoginError && vm.loginUser.email.length < 1">
                                        Ce champs est requis
                                    </small>
                                    <div data-ng-messages="loginForm.email.$error">
                                        <small class="help-block" data-ng-message="invalidEmail">Cet email n'est pas
                                            valide
                                        </small>
                                    </div>
                                </div>

                                <div class="form-group fg-float m-b-10"
                                     data-ng-class="{'has-error' : vm.formLoginError && !vm.loginUser.password}">
                                    <div class="fg-line m-t-20">
                                        <input class="form-control"
                                               type="password"
                                               name="password"
                                               autocomplete="current-password"
                                               data-ng-model="vm.loginUser.password"
                                               data-ng-keyup="$event.keyCode == 13 && vm.loginFormIsValid() && vm.login()"/>
                                        <label class="fg-label">Mot de
                                            passe</label>
                                        <small class="help-block"
                                               data-ng-show="vm.formLoginError && !vm.loginUser.password">
                                            Ce champs est requis
                                        </small>
                                    </div>
                                </div>
                            </form>

                            <button
                                class="col-xs-12 btn btn-lg bgm-lightblue loginPopupButton waves-effect"
                                data-ng-click="vm.login()"
                                id="signInPopupButton">SE CONNECTER
                            </button>

                            <div class="col-xs-12 passwordForgotten underline">
                        <span data-ng-click="vm.forgottenPassword.show();
                         vm.forgottenPasswordUser.email = vm.loginUser.email;
                         vm.showForgottenPasswordPopup = true">J'ai oublié mon mot de passe</span>
                            </div>
                        </div>

                        <div data-ng-show="!vm.loginTab">

                            <div class="col-xs-12 registerFacebookGoogle p-l-0 p-r-0">
                                <span data-ng-if="!vm.isSocialRegister()">Inscription rapide via Facebook</span>

                                <div data-ng-if="vm.isSocialRegister()">
                                    <div class="registerSocialConfirm p-l-0 p-r-0">
                                        Inscription via {{vm.socialNetwork}}
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-6 col-xs-offset-3 loginPopupFacebook waves-effect"
                                 data-ng-click="vm.facebookPreRegister()"
                                 data-ng-if="!vm.isSocialRegister()">
                                Facebook
                            </div>

                            <div class="col-xs-4 col-xs-offset-4 registerSeparator"/>

                            <div class="col-xs-12 registerMail">
                        <span class="registerWithEmailMessage pointer" data-ng-if="!vm.isSocialRegister()"
                              data-ng-click="vm.showRegisterFields = true">- <span class="underline">Ou inscription par email</span> -</span>
                                <span data-ng-if="vm.isSocialRegister()">Complétez les champs ci-dessous pour finaliser votre inscription</span>
                            </div>
                            <form name="registerForm">
                                <div class="col-xs-12 showRegisterFields"
                                     data-ng-class="{showRegisterFieldsVisible: vm.isSocialRegister() || vm.showRegisterFields}">

                                    <div class="col-xs-6 no-padding form-group fg-float m-b-30 m-t-30 halfInput"
                                         data-ng-class="{'has-error': vm.formRegisterError && !vm.newUser.firstName}">

                                        <div class="fg-line">
                                            <input type="text"
                                                   name="fname"
                                                   autocomplete="given-name"
                                                   class="form-control fg-input input-sm"
                                                   data-ng-model="vm.newUser.firstName"
                                                   data-ng-disabled="vm.isSocialRegister()" yaka-input-name>
                                            <label class="fg-label">Prénom</label>
                                        </div>
                                        <small class="help-block"
                                               data-ng-show="vm.formRegisterError && !vm.newUser.firstName">
                                            Ce champs est requis
                                        </small>
                                        <div data-ng-messages="registerForm.fname.$error">
                                            <small class="help-block" data-ng-message="invalidName">Ce prénom n'est pas
                                                valide
                                            </small>
                                        </div>
                                    </div>

                                    <div
                                        class="col-xs-6 no-padding form-group fg-float m-b-30 m-t-30 halfInput halfInputRight"
                                        data-ng-class="{'has-error': vm.formRegisterError && !vm.newUser.lastName}">

                                        <div class="fg-line">
                                            <input type="text"
                                                   name="lname"
                                                   autocomplete="family-name"
                                                   class="form-control fg-input input-sm"
                                                   data-ng-model="vm.newUser.lastName"
                                                   data-ng-disabled="vm.isSocialRegister()" yaka-input-name>
                                            <label class="fg-label">Nom</label>
                                        </div>
                                        <small class="help-block"
                                               data-ng-show="vm.formRegisterError && !vm.newUser.lastName">
                                            Ce champs est requis
                                        </small>
                                        <div data-ng-messages="registerForm.lname.$error">
                                            <small class="help-block" data-ng-message="invalidName">Ce nom n'est pas
                                                valide
                                            </small>
                                        </div>
                                    </div>

                                    <div class="form-group fg-float m-b-30"
                                         data-ng-class="{'has-error': vm.formRegisterError && !vm.newUser.defaultAddress.address}">
                                        <div class="fg-line">
                                            <input type="text"
                                                   class="form-control fg-input input-sm"
                                                   name="address"
                                                   id="address"
                                                   ng-model="vm.newUser.defaultAddress.address"
                                                   data-ng-maxlength="5"
                                                   maxlength="5"
                                                   placeholder=""
                                                   uib-typeahead="address for address in getLocation($viewValue)"/>
                                            <label class="fg-label">Votre code postal</label>
                                        </div>
                                        <small class="help-block" data-ng-if="!vm.newUser.defaultAddress.address">
                                            Merci d'indiquer le code postal puis de sélectionner la commune
                                        </small>
                                    </div>

                                    <div class="form-group fg-float m-b-30"
                                         data-ng-class="{'has-error': vm.formRegisterError && !vm.newUser.email}">
                                        <div class="fg-line">
                                            <input type="text"
                                                   name="username"
                                                   autocomplete="username"
                                                   class="form-control fg-input input-sm"
                                                   data-ng-model="vm.newUser.email" yaka-input-email>
                                            <label class="fg-label">Email</label>
                                        </div>
                                        <small class="help-block"
                                               data-ng-show="vm.formRegisterError && vm.newUser.email.length < 1">
                                            Ce champs est requis
                                        </small>
                                        <div data-ng-messages="registerForm.username.$error">
                                            <small class="help-block" data-ng-message="invalidEmail">Cet email n'est pas
                                                valide
                                            </small>
                                        </div>
                                    </div>

                                    <div class="form-group fg-float m-b-30"
                                         data-ng-class="{'has-error': vm.formRegisterError && !vm.newUser.password}">
                                        <div class="fg-line">
                                            <input type="password"
                                                   name="password"
                                                   autocomplete="new-password"
                                                   class="form-control fg-input input-sm"
                                                   data-ng-model="vm.newUser.password"
                                                   data-ng-minlength="6">
                                            <label class="fg-label">Mot
                                                de passe</label>
                                        </div>
                                        <small class="help-block"
                                               data-ng-show="vm.formRegisterError && vm.newUser.password.length < 1">
                                            Ce champs est requis
                                        </small>
                                        <div data-ng-messages="registerForm.password.$error">
                                            <small class="help-block" data-ng-message="minlength">
                                                Le mot de passe doit faire au moins 6 caractères
                                            </small>
                                        </div>
                                    </div>

                                    <div class="form-group fg-float m-b-15"
                                         data-ng-class="{'has-error': vm.formRegisterError && !vm.passwordConfirm || (vm.newUser.password && vm.passwordConfirm && (vm.newUser.password != vm.passwordConfirm))}">
                                        <div class="fg-line">
                                            <input type="password" class="form-control fg-input input-sm"
                                                   data-ng-model="vm.passwordConfirm" data-ng-minlength="6">
                                            <label class="fg-label">Confirmation</label>
                                        </div>
                                        <small class="help-block"
                                               data-ng-show="vm.formRegisterError && !vm.passwordConfirm">
                                            Ce champs est requis
                                        </small>
                                        <small class="help-block"
                                               data-ng-show="vm.newUser.password && vm.passwordConfirm && (vm.newUser.password != vm.passwordConfirm)">
                                            Les deux mots de passe ne correspondent pas
                                        </small>
                                    </div>

                                    <div class="col-xs-12 no-padding select m-b-15">
                                        <select class="form-control"
                                                data-ng-model="vm.newUser.referral">
                                            <option value="" disabled="disabled">Comment nous avez-vous connu ?
                                                (facultatif)
                                            </option>
                                            <option value="REFERRAL_SEARCH">Recherche internet</option>
                                            <option value="REFERRAL_FRIEND">Par connaissance</option>
                                            <option value="REFERRAL_SOCIAL">Réseaux sociaux</option>
                                            <option value="REFERRAL_LM">Leroy Merlin</option>
                                            <option value="REFERRAL_INVITATION">Invitation CasaVOX</option>
                                            <option value="REFERRAL_OTHER">Autre</option>
                                        </select>
                                    </div>

                                    <div class="col-xs-12 no-padding form-group fg-float m-b-10 m-t-10"
                                         data-ng-if="vm.newUser.referral == 'REFERRAL_OTHER'">
                                        <div class="fg-line">
                                            <input type="text"
                                                   name="BY_OTHER"
                                                   autocomplete="given-name"
                                                   class="form-control fg-input input-sm"
                                                   data-ng-model="vm.referralOther">
                                            <label class="fg-label">Entrez votre source</label>
                                        </div>
                                    </div>


                                    <div class="col-xs-12 center m-b-0 t-center"
                                         data-ng-class="{'c-red' : vm.formRegisterError && !vm.newUser.recaptchaResponse}">
                                        Cochez la case ci-dessous
                                    </div>
                                    <div
                                        vc-recaptcha
                                        data-ng-model="vm.newUser.recaptchaResponse"
                                        key="'6LcFnCQTAAAAAGU0Wowjk1y_fsaItUZ3lfftgH7U'"
                                        class="visible-lg visible-md col-xs-12 m-t-0 center recaptcha"
                                    ></div>
                                    <div
                                        vc-recaptcha
                                        data-ng-model="vm.newUser.recaptchaResponse"
                                        key="'6LcFnCQTAAAAAGU0Wowjk1y_fsaItUZ3lfftgH7U'"
                                        class="visible-sm col-xs-12 m-t-0 center recaptcha mobile"
                                        style="-moz-transform:scale(0.95); -ms-transform:scale(0.95); -o-transform:scale(0.95); -moz-transform-origin:0; -ms-transform-origin:0; -o-transform-origin:0; -webkit-transform:scale(0.95); transform:scale(0.95); -webkit-transform-origin:0 0; transform-origin:0; filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.95,M12=0,M21=0,M22=0.95,SizingMethod='auto expand');"
                                    ></div>
                                    <div
                                        vc-recaptcha
                                        data-ng-model="vm.newUser.recaptchaResponse"
                                        key="'6LcFnCQTAAAAAGU0Wowjk1y_fsaItUZ3lfftgH7U'"
                                        class="visible-xs col-xs-12 m-t-0 center recaptcha mobile"
                                        style="-moz-transform:scale(0.9); -ms-transform:scale(0.9); -o-transform:scale(0.9); -moz-transform-origin:0; -ms-transform-origin:0; -o-transform-origin:0; -webkit-transform:scale(0.9); transform:scale(0.9); -webkit-transform-origin:0 0; transform-origin:0; filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.9,M12=0,M21=0,M22=0.9,SizingMethod='auto expand');"
                                    ></div>
                                    <button
                                        class="col-xs-12 btn btn-lg bgm-lightblue loginPopupButton waves-effect"
                                        data-ng-click="vm.register()">S'INSCRIRE
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div data-ng-if="vm.noSocialAccountMessage">
                        <div class="noSocialAccountMessage">
                            Ce compte {{vm.socialNetwork}} nous est inconnu.<br/>
                            Essayez de vous connecter avec votre email et votre mot de passe ou de créer un compte en
                            cliquant
                            sur <em>S'inscrire</em> puis <em>{{vm.socialNetwork}}</em>.
                        </div>
                        <button
                            class="col-xs-12 btn btn-lg bgm-orange loginPopupButton waves-effect"
                            data-ng-click="vm.noSocialAccountMessage = false">OK
                        </button>
                    </div>
                </div>
            </div>
        </ion-content>
    </ion-modal-view>
</script>


<script id="forgotten-password.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar>
            <h1 class="title">Mot de passe oublié ?</h1>
            <img class="popupCloseButton popupCloseIonic" data-ng-if="!vm.noSocialAccountMessage"
                 src="icons/mdpi/ic_popup_close.png"
                 data-ng-click="vm.forgottenPassword.hide()" alt=""/>
        </ion-header-bar>
        <ion-content>
            <div class="container">
                <div class="yakaPopupWindow col-xs-12" data-ng-click="$event.stopPropagation()">
                    <div data-ng-if="!vm.passwordForgottenMessageSent">

                        <form name="recoverPassword">
                            <div class="form-group fg-float m-t-30"
                                 data-ng-class="{'has-error': vm.formLostPasswordError && !vm.forgottenPasswordUser.email}">
                                <div class="fg-line">
                                    <input type="text"
                                           name="username"
                                           autocomplete="username"
                                           data-ng-disabled="vm.isSocialRegister()"
                                           class="form-control fg-input input-sm"
                                           data-ng-model="vm.forgottenPasswordUser.email"
                                           yaka-input-email>
                                    <label class="fg-label">Email</label>
                                </div>
                                <small class="help-block"
                                       data-ng-show="vm.formLostPasswordError && vm.forgottenPasswordUser.email.length < 1">
                                    Ce champs est requis
                                </small>
                                <div data-ng-messages="recoverPassword.username.$error">
                                    <small class="help-block" data-ng-message="invalidEmail">Cet email n'est pas
                                        valide
                                    </small>
                                </div>
                            </div>
                        </form>
                        <button
                            class="col-xs-12 btn btn-lg bgm-lightblue loginPopupButton passwordForgottenButton waves-effect"
                            data-ng-click="vm.reinitializePassword()">RÉINITIALISER MON MOT DE PASSE
                        </button>
                    </div>
                    <div class="passwordForgottenMessageSent" data-ng-if="vm.passwordForgottenMessageSent">
                        Nous venons de vous envoyer un email contenant un lien qui vous permettra de réinitialiser votre
                        mot de
                        passe.
                    </div>
                </div>
            </div>
        </ion-content>
    </ion-modal-view>
</script>
