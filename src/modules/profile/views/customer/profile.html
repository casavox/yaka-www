<style type="text/css">
    #map_canvas {
        height: 327px;
        width: calc(100% + 30px);
        margin-left: -15px;
        margin-right: -15px;
    }

    #map_canvas {
        position: relative;
    }

    .angular-google-map-container {
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        left: 0;
    }
</style>
<header id="header" data-current-skin="{{app.getTheme()}}" data-ng-include="'/modules/core/views/header.html'"
></header>

<aside id="sidebar" data-ng-include="'/modules/core/views/sidebar-left.html'"
       data-ng-class="{ 'toggled': app.sidebarToggle.left }"></aside>

<section id="main" data-ng-cloak>
    <div id="content" class="content">
        <div class="container">
            <div class="col-sm-6">
                <div class="col-xs-12 no-padding card">
                    <div class="card-header ch-alt" data-ng-class="{'bgm-lightblue': vm.infosCardIsComplete()}">
                        <h2>
                            <i class="zmdi zmdi-hc-2x zmdi-check v-align-sub m-r-10"
                               data-ng-if="vm.infosCardIsComplete()"></i>
                            Informations générales
                            <small class="c-red" data-ng-if="!vm.infosCardIsComplete()">
                                Informations en rouge obligatoires
                            </small>
                        </h2>
                    </div>
                    <div class="col-xs-12 card-body m-t-25">
                        <form name="profileForm">
                            <div class="col-xs-12 no-padding">
                                <div class="col-xs-3">
                                    <div class="img-profile">

                                        <yaka-avatar size="44" user="vm.profileInfo"></yaka-avatar>

                                        <button
                                            class="profileAvatarEditButton btn bgm-lightblue btn-icon waves-effect waves-circle"
                                            ngf-select="vm.uploadProfileImg($files, $invalidFiles, 0)"
                                            ngf-accept="'image/*'" ngf-max-size="20MB">
                                            <i class="zmdi zmdi-edit"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="col-xs-9 no-padding-right">

                                    <div class="form-group fg-float m-b-30"
                                         data-ng-class="{'has-error': !vm.profileInfo.gender}">
                                        <div class="fg-line">
                                            {{vm.profileInfo.gender}}
                                            <div class="select">
                                                <select name="gender"
                                                        required="required"
                                                        data-ng-model="vm.profileInfo.gender"
                                                        class="form-control">
                                                    <option value="" disabled selected></option>
                                                    <option data-ng-selected="vm.profileInfo.gender == 'MR'" value="MR">
                                                        M.
                                                    </option>
                                                    <option data-ng-selected="vm.profileInfo.gender == 'MRS'"
                                                            value="MRS">
                                                        Mme.
                                                    </option>
                                                </select>
                                            </div>
                                            <label class="fg-label">Civilité</label>
                                        </div>
                                        <div data-ng-messages="profileForm.gender.$error">
                                            <small class="help-block" data-ng-message="required">Ce champ est requis
                                            </small>
                                        </div>
                                    </div>

                                    <div class="form-group fg-float m-b-30"
                                         data-ng-class="{'has-error': !vm.profileInfo.firstName}">

                                        <div class="fg-line">
                                            <input type="text" name="firstName" class="form-control fg-input"
                                                   data-ng-model="vm.profileInfo.firstName"
                                                   required="required" yaka-input-name>
                                            <label class="fg-label">Prénom</label>
                                        </div>
                                        <div data-ng-messages="profileForm.firstName.$error">
                                            <small class="help-block" data-ng-message="required">Ce champ est requis
                                            </small>
                                            <small class="help-block" data-ng-message="invalidName">Ce prénom n'est pas
                                                valide
                                            </small>
                                        </div>

                                    </div>
                                    <div class="form-group fg-float m-b-30"
                                         data-ng-class="{'has-error': !vm.profileInfo.lastName}">

                                        <div class="fg-line">
                                            <input type="text" name="lastName" class="form-control fg-input"
                                                   data-ng-model="vm.profileInfo.lastName"
                                                   required="required" yaka-input-name>
                                            <label class="fg-label">Nom</label>
                                        </div>
                                        <div data-ng-messages="profileForm.lastName.$error">
                                            <small class="help-block" data-ng-message="required">Ce champ est requis
                                            </small>
                                            <small class="help-block" data-ng-message="invalidName">Ce nom n'est pas
                                                valide
                                            </small>
                                        </div>

                                    </div>

                                </div>
                            </div>

                            <div class="col-xs-12 no-padding form-group fg-float m-b-30"
                                 data-ng-class="{'has-error': !vm.profileInfo.phoneNumber}">
                                <div class="fg-line">
                                    <input type="text" name="phoneNumber"
                                           class="form-control fg-input"
                                           required="required"
                                           data-ng-model="vm.profileInfo.phoneNumber" yaka-input-phone>
                                    <label class="fg-label fg-label-phone">Téléphone</label>
                                </div>
                                <div data-ng-messages="profileForm.phoneNumber.$error">
                                    <small class="help-block" data-ng-message="required">
                                        Ce champ est requis
                                    </small>
                                    <small class="help-block" data-ng-message="invalidPhone">
                                        Ce numéro de téléphone n'est pas valide
                                    </small>
                                </div>
                            </div>

                            <div class="col-xs-12 no-padding form-group fg-float m-b-30"
                                 data-ng-class="{'has-error': !vm.profileInfo.email}">
                                <div class="fg-line">
                                    <input type="text" name="email" class="form-control fg-input"
                                           data-ng-model="vm.profileInfo.email"
                                           required="required" yaka-input-email>
                                    <label class="fg-label">Email</label>
                                </div>
                                <div data-ng-messages="profileForm.email.$error">
                                    <small class="help-block" data-ng-message="required">Ce champ est requis</small>
                                    <small class="help-block" data-ng-message="invalidEmail">Cet email n'est pas
                                        valide
                                    </small>
                                </div>
                            </div>

                            <div class="col-xs-12 no-padding form-group fg-float m-b-30"
                                 data-ng-class="{'has-error': !vm.profileInfo.defaultAddress.address}">
                                <div class="fg-line">
                                    <input type="text" class="form-control fg-input"
                                           vs-google-autocomplete="vm.autocomplete.options"
                                           vs-autocomplete-validator
                                           data-ng-model="vm.profileInfo.defaultAddress.address"
                                           type="text"
                                           name="address"
                                           required="required"
                                           placeholder=""
                                           id="address">
                                    <label class="fg-label">Addresse principale</label>
                                </div>
                                <div data-ng-messages="profileForm.address.$error">
                                    <small class="help-block" data-ng-message="required">Ce champ est requis</small>
                                </div>
                            </div>

                            <div class="col-xs-12 no-padding profile-box-footer m-b-20">

                                <button class="btn btn-info bgm-lightblue waves-effect"
                                        data-ng-click="vm.updateProfile()"
                                        data-ng-disabled="vm.updating || !vm.showButtonsProfile()">
                                    Enregistrer
                                </button>
                                <button class="btn btn-link waves-effect"
                                        data-ng-click="vm.cancelProfile()"
                                        data-ng-disabled="vm.updating || !vm.showButtonsProfile()">
                                    Annuler
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="col-xs-12 no-padding card">
                    <div class="card-header ch-alt">
                        <h2>
                            Comptes sociaux associés
                            <small>
                                Associer votre compte Facebook ou Google vous permet de vous connecter plus rapidement.
                            </small>
                        </h2>
                    </div>
                    <div class="col-xs-12 card-body m-t-20 m-b-20 c-gray">

                        <div class="row">
                            <i class="col-xs-2 v-align-middle zmdi zmdi-hc-3x zmdi-facebook-box p-l-25"
                               data-ng-class="{'c-facebook-blue': app.getUser().facebookId}"></i>

                            <div class="col-xs-8 v-align-middle m-t-1" data-ng-if="app.getUser().facebookId">
                                Compte Facebook associé
                                <small>
                                    {{app.getUser().facebookEmail}}
                                </small>
                            </div>

                            <button class="btn btn-default waves-effect m-t-4 m-l-20"
                                    data-ng-if="!app.getUser().facebookId"
                                    data-ng-click="vm.attachFacebook()">
                                Associer
                            </button>

                            <i class="col-xs-2 v-align-middle zmdi zmdi-hc-2x zmdi-close m-t-5 t-right c-black pointer"
                               data-ng-if="app.getUser().facebookId"
                               data-ng-click="vm.detachFacebook()"></i>
                        </div>
                        <div class="row m-t-5">
                            <i class="col-xs-2 v-align-middle zmdi zmdi-hc-3x zmdi-google p-l-25"
                               data-ng-class="{'c-google-red': app.getUser().googleId}"></i>

                            <div class="col-xs-8 v-align-middle m-t-1" data-ng-if="app.getUser().googleId">
                                Compte Google associé
                                <small>
                                    {{app.getUser().googleEmail}}
                                </small>
                            </div>

                            <button class="btn btn-default waves-effect m-t-4 m-l-20"
                                    data-ng-if="!app.getUser().googleId"
                                    data-ng-click="vm.attachGoogle()">
                                Associer
                            </button>

                            <i class="col-xs-2 v-align-middle zmdi zmdi-hc-2x zmdi-close m-t-5 t-right c-black pointer"
                               data-ng-if="app.getUser().googleId"
                               data-ng-click="vm.detachGoogle()"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="col-xs-12 no-padding card">
                    <div class="card-header ch-alt">
                        <h2>Modifier le mot de passe</h2>
                    </div>
                    <div class="col-xs-12 card-body m-t-20">
                        <div class="form-group fg-float m-b-30">
                            <div class="fg-line">
                                <input type="password" class="form-control fg-input"
                                       data-ng-model="vm.pwdCurrent">
                                <label class="fg-label">Mot de passe actuel</label>
                            </div>
                        </div>

                        <div class="form-group fg-float m-b-30">
                            <div class="fg-line">
                                <input type="password" class="form-control fg-input"
                                       data-ng-model="vm.pwd1">
                                <label class="fg-label">Nouveau mot de passe</label>
                            </div>
                        </div>

                        <div class="form-group fg-float m-b-30"
                             data-ng-class="{'has-error': vm.pwd1 && vm.pwd2 && (vm.pwd1 != vm.pwd2)}">
                            <div class="fg-line">
                                <input type="password" class="form-control fg-input"
                                       data-ng-model="vm.pwd2">
                                <label class="fg-label">Confirmation</label>
                            </div>
                            <small class="help-block" data-ng-show="vm.pwd1 && vm.pwd2 && (vm.pwd1 != vm.pwd2)">
                                Les deux mots de passe ne correspondent pas
                            </small>
                        </div>

                        <div class="profile-box-footer m-b-20">

                            <button class="btn btn-info bgm-lightblue waves-effect"
                                    data-ng-click="vm.changePassword()"
                                    data-ng-disabled="vm.updating || !vm.showButtonsNewPassword()">
                                Enregistrer
                            </button>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
