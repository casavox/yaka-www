<header id="header" data-current-skin="{{app.getTheme()}}" ng-include="'/modules/core/views/header.html'"
    ></header>

<section id="view">

    <aside id="sidebar" data-ng-include="'/modules/core/views/sidebar-left.html'"
           data-ng-class="{ 'toggled': app.sidebarToggle.left }"></aside>

    <div id="content" class="page-content">
        <div class="content-slide" id="main-scroll-container">
            <div class="slide-main" id="slide1" ng-show="vm.selectCategory">
                <div class="row new-project-box no-margin">
                    <h2 class="text-center h2-middle">Sélectionnez l'activité principale de votre projet</h2>

                    <div class="col-xs-3 no-margin no-padding type-project-box" ng-class="child.selected"
                         ng-repeat="child in vm.newProject.childrenActivities"
                         ng-click="vm.selectType(child, vm.newProject.childrenActivities)"
                         title="{{'ACTIVITY_' + child.code | translate}}" ng-show="vm.wait">
                        <div class="type-project-box-content">
                            <div class="v-icon v-icon-{{child.code}} center">
                            </div>
                            <p class="type-project-title text-center">
                                {{'ACTIVITY_' + child.code | translate }}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide bckg-white" id="subSlide{{$index}}" ng-show="vm.questions[$index]"
                 ng-repeat="q in vm.questions" ng-if="q.childrenActivities">
                <h2 class="text-center">{{'ACTIVITY_' + q.code | translate }}</h2>
                <ul class="questions-ul center">
                    <li class="question-li center" ng-class="child.selected"
                        ng-repeat="child in q.childrenActivities"
                        ng-click="vm.selectSubService(child, q.childrenActivities, $parent.$index)">
                        {{ 'ACTIVITY_' + child.code | translate }}
                    </li>
                </ul>
            </div>
            <div class="slide bckg-default" id="slide3" ng-show="vm.service">
                <div class="row center no-margin no-padding material-box">
                    <h4 class="material-title">Fournissez-vous une partie du matériel ?</h4>

                    <div class="col-md-6">
                        <div class="v-btn center" ng-click="vm.material = 'yes'"
                             ng-class="{activate: vm.material == 'yes'}">
                            OUI
                        </div>
                        <p class="material-sub">Précisez ci-dessous</p>
                    </div>
                    <div class="col-md-6">
                        <div class="v-btn center" ng-click="vm.material = 'no'"
                             ng-class="{activate: vm.material == 'no'}">
                            NON
                        </div>
                        <p class="material-sub"></p>
                    </div>
                </div>
                <p class="error center" ng-show="vm.error.material.flag">
                    {{vm.error.material.message}}
                </p>

                <h2 class="text-center h2-middle">Décrivez-nous votre projet ?</h2>
                <textarea class="description center" ng-model="vm.projectDescription"
                          placeholder="Au moins 30 caractères : Décrivez-nous votre projet et ses particularités (dimensions, état du lieu des travaux, le cas échéant le type de matériel fournit, etc.). Précisez-nous également si vous avez des contraintes ou souhaits particuliers."
                          ng-blur="vm.verifDescription()"></textarea>

                <p class="error center"
                   ng-show="vm.error.description.flag  && (vm.projectDescription.length < 30)">
                    {{vm.error.description.message}}
                </p>
                <button type="button" class="new-project-continue btn" ng-click="vm.continueProject()"
                        ng-if="vm.material && (vm.projectDescription.length >= 30)">Continue
                </button>
            </div>
            <div class="slide bckg-white" id="slide4" ng-show="vm.continue">
                <h2 class="text-center">Ajoutez des photos</h2>

                <div class="row w-900 center no-margin">
                    <div class="col-md-3 no-padding"
                         ngf-drop="uploadFiles($files)"
                         ngf-drag-over-class="dragOverClass($event)"
                         ng-model="files"
                         ng-multiple="false">
                        <span class=" center img-preview-remove" ng-click="photos[0] = {}"
                              ng-show="photos[0].public_id"></span>

                        <div class="add-img center" ngf-select="uploadFiles($files, $invalidFiles, 0)"
                             ngf-accept="'image/*'" ngf-max-size="5MB">
                            <a cl-href="{{photos[0].public_id}}" target="_blank" format="png"
                               class="center-midlle"
                               ng-show="photos[0].public_id">

                                <cl-image public-id="{{photos[0].public_id}}" secure="true"
                                          class="img-preview center-middle"
                                          format="png">
                                    <cl-transformation height="220" width="220" crop="fill"/>
                                </cl-image>
                            </a>

                            <img class="center-middle" src="icons/mdpi/ic_new_request.png" alt=""
                                 ng-hide="photos[0].public_id || vm.imageLoading[0]"/>

                            <img class="center-middle" src="img/loader_small.gif" alt=""
                                 ng-show="vm.imageLoading[0]"/>
                        </div>
                        <textarea class="comment custom-comment" ng-model="photos[0].description"
                                  ng-show="photos[0].public_id" placeholder="Joindre un commentaire"
                                  ng-change="vm.limitLength(photos[0], 'description', 140)"></textarea>

                        <div class="comment-length">
                            {{photos[0].description.length}}/140
                        </div>
                    </div>
                    <div class="col-md-3 no-padding" ng-if="!photos[0].public_id && !photos[1].public_id">
                        <div class="add-img-disabled center">
                            <img class="center-middle" src="icons/mdpi/ic_disabled.png" alt=""/>
                        </div>
                    </div>
                    <div class="col-md-3 no-padding"
                         ng-if="photos[0].public_id || photos[1 ].public_id"
                         ngf-drop="uploadFiles($files)"
                         ngf-drag-over-class="dragOverClass($event)"
                         ng-model="files"
                         ng-multiple="false">
                        <span class=" center img-preview-remove" ng-click="photos[1] = {}"
                              ng-show="photos[1].public_id"></span>

                        <div class="add-img center" ngf-select="uploadFiles($files, $invalidFiles, 1)"
                             ngf-accept="'image/*'" ngf-max-size="5MB">
                            <a cl-href="{{photo.public_id}}" format="png" target="_blank" class="center-midlle"
                               ng-show="photos[1].public_id">

                                <cl-image public-id="{{photos[1].public_id}}" secure="true"
                                          class="img-preview center-middle"
                                          format="png">
                                    <cl-transformation height="220" width="220" crop="fill"/>
                                </cl-image>
                            </a>
                            <img class="center-middle" src="icons/mdpi/ic_new_request.png" alt=""
                                 ng-hide="photos[1].public_id || vm.imageLoading[1]"/>

                            <img class="center-middle" src="img/loader_small.gif" alt=""
                                 ng-show="vm.imageLoading[1]"/>
                        </div>
                        <textarea class="comment custom-comment" ng-model="photos[1].description"
                                  ng-show="photos[1].public_id" placeholder="Comment this photo"
                                  ng-change="vm.limitLength(photos[1], 'description', 140)"></textarea>

                        <div class="comment-length">
                            {{photos[1].description.length}}/140
                        </div>
                    </div>
                    <div class="col-md-3 no-padding" ng-if="!photos[1].public_id && !photos[2].public_id">
                        <div class="add-img-disabled center">
                            <img class="center-middle" src="icons/mdpi/ic_disabled.png" alt=""/>
                        </div>
                    </div>
                    <div class="col-md-3 no-padding"
                         ng-if="photos[1].public_id || photos[2].public_id"
                         ngf-drop="uploadFiles($files)"
                         ngf-drag-over-class="dragOverClass($event)"
                         ng-model="files"
                         ng-multiple="false">
                        <span class=" center img-preview-remove" ng-click="photos[2] = {}"
                              ng-show="photos[2].public_id"></span>

                        <div class="add-img center" ngf-select="uploadFiles($files, $invalidFiles, 2)"
                             ngf-accept="'image/*'" ngf-max-size="5MB">
                            <a cl-href="{{photo.public_id}}" format="png" target="_blank" class="center-midlle"
                               ng-show="photos[2].public_id">

                                <cl-image public-id="{{photos[2].public_id}}" secure="true"
                                          class="img-preview center-middle"
                                          format="png">
                                    <cl-transformation height="220" width="220" crop="fill"/>
                                </cl-image>
                            </a>
                            <img class="center-middle" src="icons/mdpi/ic_new_request.png" alt=""
                                 ng-hide="photos[2].public_id || vm.imageLoading[2]"/>

                            <img class="center-middle" src="img/loader_small.gif" alt=""
                                 ng-show="vm.imageLoading[2]"/>
                        </div>
                        <textarea class="comment custom-comment" ng-model="photos[2].description"
                                  ng-show="photos[2].public_id" placeholder="Comment this photo"
                                  ng-change="vm.limitLength(photos[2], 'description', 140)"></textarea>

                        <div class="comment-length">
                            {{photos[2].description.length}}/140
                        </div>
                    </div>
                    <div class="col-md-3 no-padding" ng-if="!photos[2].public_id && !photos[3].public_id ">
                        <div class="add-img-disabled center">
                            <img class="center-middle" src="icons/mdpi/ic_disabled.png" alt=""/>
                        </div>
                    </div>
                    <div class="col-md-3 no-padding"
                         ng-if="photos[2].public_id || photos[3].public_id"
                         ngf-drop="uploadFiles($files)"
                         ngf-drag-over-class="dragOverClass($event)"
                         ng-model="files"
                         ng-multiple="false">
                        <span class=" center img-preview-remove" ng-click="photos[3] = {}"
                              ng-show="photos[3].public_id"></span>

                        <div class="add-img center" ngf-select="uploadFiles($files, $invalidFiles, 3)"
                             ngf-accept="'image/*'" ngf-max-size="5MB">
                            <a cl-href="{{photo.public_id}}" format="png" target="_blank" class="center-midlle"
                               ng-show="photos[3].public_id">

                                <cl-image public-id="{{photos[3].public_id}}" secure="true"
                                          class="img-preview center-middle"
                                          format="png">
                                    <cl-transformation height="220" width="220" crop="fill"/>
                                </cl-image>
                            </a>
                            <img class="center-middle" src="icons/mdpi/ic_new_request.png" alt=""
                                 ng-hide="photos[3].public_id || vm.imageLoading[3]"/>

                            <img class="center-middle" src="img/loader_small.gif" alt=""
                                 ng-show="vm.imageLoading[3]"/>
                        </div>
                        <textarea class="comment custom-comment" ng-model="photos[3].description"
                                  ng-show="photos[3].public_id"
                                  ng-change="vm.limitLength(photos[3], 'description', 140)"
                                  placeholder="Comment this photo"></textarea>

                        <div class="comment-length">
                            {{photos[3].description.length}}/140
                        </div>
                    </div>
                </div>
                <button type="button" class="new-project-continue btn" ng-click="vm.continueProjectImg()">
                    Continue
                </button>
            </div>
            <div class="slide bckg-default" id="slide5" ng-show="vm.continueImg">
                <h2 class="text-center mb-39">Indiquez l'adresse des travaux ?</h2>

                <h3 class="text-center mb-60" ng-show="!vm.newAddrFlag">Choisissez une de vos adresses ou
                    indiquez-en
                    une nouvelle</h3>

                <h3 class="text-center mb-60" ng-show="vm.newAddrFlag">Indiquez un nom puis précisez votre
                    adresse</h3>

                <div class="row no-margin w-900 center select-addr">
                    <div class="col-md-4 no-padding" ng-if="vm.user.addresses.length>0">
                        <select class="select-custom" ng-model="vm.myAddress" ng-change="vm.setAddress()">
                            <option value="new">- Nouvelle adresse -</option>
                            <option ng-repeat="a in vm.user.addresses" value="{{a.address}}"
                                    ng-selected="a.address.toString() == vm.myAddress.toString()">{{a.name}}
                            </option>
                        </select>
                    </div>
                    <div class="col-md-4 no-padding" ng-if="vm.user.addresses.length>0">
                        <p class="">
                            - Ou ajouter une nouvelle adresse :
                        </p>
                    </div>
                    <div class="col-md-4 no-padding">
                        <input type="text" class="select-custom" ng-model="vm.newAddr.name"
                               ng-change="vm.verifNameAddr()"
                               placeholder="Nom de l'adresse (Maison, Papa, ...)">
                    </div>
                </div>
                <div class="row no-margin w-900 center addr">
                    <div class="no-padding mb-39" ng-class="col-xs-12">
                        <div class="inner-addon right-addon">
                            <div class="disabled-addr" ng-show="vm.disabledAddr"></div>
                            <i class="glyphicon glyphicon-map-marker"></i>
                            <input vs-google-autocomplete="options"
                                   options="options"
                                   ng-model="address.name"
                                   vs-place="address.place"
                                   vs-place-id="address.components.placeId"
                                   vs-street-number="address.components.streetNumber"
                                   vs-street="address.components.street"
                                   vs-city="address.components.city"
                                   vs-state="address.components.state"
                                   vs-country-short="address.components.countryCode"
                                   vs-country="address.components.country"
                                   vs-post-code="address.components.postCode"
                                   vs-district="address.components.district"
                                   vs-latitude="address.components.location.lat"
                                   vs-longitude="address.components.location.long"
                                   type="text"
                                   name="address"
                                   id="address"
                                   placeholder="Précisez votre adresse (vous seul décidez quand et par qui elle sera visible)"
                                   class="input-custom">
                        </div>

                    </div>
                </div>
                <p class="error center" ng-show="vm.error.address.flag">
                    {{vm.error.address.message}}
                </p>
                <button type="button" class="new-project-continue btn" ng-click="vm.continueAddr()">Continue
                </button>
            </div>
            <div class="slide bckg-white" id="slide6" ng-show="vm.continueAddressFlag">
                <h2 class="text-center">Quand voulez-vous que les travaux commencent ?</h2>

                <div>
                    <ul class="questions-ul center no-padding">
                        <li class="question-li center" ng-class="vm.child3"
                            ng-click="vm.selectDateType('NONE'); vm.child0 = ''; vm.child1 = ''; vm.child2 = ''; vm.child3 = 'activate'">
                            Dès que possible
                        </li>
                        <li class="question-li center" ng-class="vm.child2"
                            ng-click="vm.selectDateType('WITHIN_A_MONTH'); vm.child0 = ''; vm.child1 = ''; vm.child2 = 'activate'; vm.child3 = ''">
                            Dans le mois
                        </li>
                        <li ng-show="vm.dateType == 'WITHIN_A_MONTH'" class="custom-li-date question-li center date">
                            Avant le {{vm.desiredDateMonth | date:'dd MMMM'}}
                        </li>
                        <li class="question-li center" ng-class="vm.child0"
                            ng-click="vm.selectDateType('SPECIFIC'); vm.selectDate(); vm.child0 = 'activate'; vm.child1 = ''; vm.child2 = ''; vm.child3 = ''">
                            À partir d'une date
                        </li>
                        <li ng-show="vm.dateSelected" class="custom-li-date question-li center"
                            ng-click="vm.unSelectdate()">
                            {{vm.dt | date:'dd-MM-yyyy'}}
                        </li>
                        <li ng-show="vm.dateFlag">
                            <div style="display:inline-block; min-height:290px;" class="center custom-picker">
                                <uib-datepicker ng-model="vm.dt" datepicker-options="vm.datepickerOptions"
                                                class="well well-sm custom-date"
                                                custom-class="getDayClass(date, mode)"></uib-datepicker>
                            </div>
                        </li>
                    </ul>
                    <p class="error center" ng-show="vm.error.date.flag">
                        {{vm.error.date.message}}
                    </p>
                </div>
                <button type="button" class="new-project-continue btn" ng-click="vm.post()"
                        ng-disabled="!vm.dateType">
                    PUBLIER
                </button>
            </div>
        </div>
    </div>
</section>
