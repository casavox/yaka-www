<header id="header" data-current-skin="{{app.getTheme()}}" data-ng-include="'/modules/core/views/header.html'"
></header>

<section id="view">

    <aside id="sidebar" data-ng-include="'/modules/core/views/sidebar-left.html'"
           data-ng-class="{ 'toggled': app.sidebarToggle.left }"></aside>

    <div id="content" class="page-content">
        <div class="content-slide new-project" id="main-scroll-container">
            <div class="slide-main" id="slide1" data-ng-show="vm.selectCategory">
                <div class="new-project-box ">
                    <div class="row no-margin">
                        <h2 class="m-l-10 text-left">Votre projet porte-t-il sur une activité en particulier ?</h2>

                        <div class="col-xs-3 no-margin no-padding type-project-box" data-ng-class="child.selected"
                             data-ng-repeat="child in vm.newProject.childrenActivities"
                             data-ng-click="vm.selectType(child, vm.newProject.childrenActivities)"
                             title="{{'ACTIVITY_' + child.code | translate}}"
                             data-ng-show="vm.wait && child.code != 'AUTO_MULTI'">
                            <div class="type-project-box-content">
                                <div class="v-icon v-icon-{{child.code}} center">
                                </div>
                                <p class="type-project-title text-center">
                                    {{'ACTIVITY_' + child.code | translate }}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="row no-margin">
                        <h2 class="m-t-5 m-l-10 text-left">Ou sur plusieurs ?</h2>

                        <div class="row vertical-center no-margin">
                            <div class="col-xs-3 no-margin no-padding type-project-box"
                                 data-ng-class="vm.multi"
                                 data-ng-click="vm.selectType('AUTO_MULTI')"
                                 title="{{'ACTIVITY_MULTI' | translate}}" data-ng-show="vm.wait">
                                <div class="type-project-box-content">
                                    <div class="row m-l-0 m-r-0">
                                        <div class="v-icon col-xs-6 v-icon-COU_9000 right"></div>
                                        <div class="v-icon col-xs-6 v-icon-ELE_1000 left"></div>
                                    </div>
                                    <div class="row m-l-0 m-r-0">
                                        <div class="v-icon col-xs-6 v-icon-PLU_2000"></div>
                                        <div class="v-icon col-xs-6 v-icon-PAI_6000"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-9 no-margin no-padding" title="{{'ACTIVITY_MULTI_100' | translate}}"
                                 data-ng-show="vm.wait">
                                <div class="lv-small m-l-10">
                                    <p class="m-b-0">
                                        - Créer ou modifier une salle de bain, une cuisine, des toilettes, ...</p>

                                    <p class="m-b-0">
                                        - Construire une extension, une piscine, un garage,...</p>

                                    <p class="m-b-0">
                                        - Modifier ou aménager des combles, un sous-sol, un box, ...</p>

                                    <p class="m-b-0">
                                        - Tout autre projet nécessitant plusieurs corps de métier, ...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="slide bckg-white" id="subSlide{{$index}}" data-ng-show="vm.questions[$index]"
                 data-ng-repeat="q in vm.questions" data-ng-if="q.childrenActivities">
                <h2 class="text-center">{{'ACTIVITY_' + q.code | translate }}</h2>
                <ul class="questions-ul center">
                    <li class="question-li center" data-ng-class="child.selected"
                        data-ng-repeat="child in q.childrenActivities"
                        data-ng-click="vm.selectSubService(child, q.childrenActivities, $parent.$index)">
                        {{ 'ACTIVITY_' + child.code | translate }}
                    </li>
                </ul>
            </div>
            <div style="background-color: white; height: 3px;" data-ng-show="!vm.questions[$index]">
            </div>

            <div class="slide bckg-default" id="slide3" data-ng-show="vm.service">
                <div class="row center no-margin no-padding material-box">
                    <h4 class="material-title material-title-small">Fournissez-vous une partie du matériel ?</h4>

                    <div class="col-sm-6">
                        <div id="materialYes" class="v-btn center" data-ng-click="vm.material = 'yes'"
                             data-ng-class="{activate: vm.material == 'yes'}">OUI
                        </div>
                        <p class="material-sub">Précisez ci-dessous</p>
                    </div>
                    <div class="col-sm-6">
                        <div id="materialNo" class="v-btn center" data-ng-click="vm.material = 'no'"
                             data-ng-class="{activate: vm.material == 'no'}">NON
                        </div>
                        <p class="material-sub"></p>
                    </div>
                </div>
                <p class="error center" data-ng-show="vm.error.material.flag">
                    {{vm.error.material.message}}
                </p>

                <h2 class="text-center h2-middle">Décrivez-nous votre projet ?</h2>
                <textarea class="description center" data-ng-model="vm.projectDescription"
                          placeholder="Au moins 30 caractères - Que voulez-vous faire faire ? Décrivez-nous votre projet et ses particularités (dimensions, état du lieu des travaux, le cas échéant le type de matériel fournit, etc.). Précisez-nous également si vous avez des contraintes ou souhaits particuliers."
                          data-ng-blur="vm.verifDescription()"></textarea>

                <p id="errorDescriptionMessage" class="error center"
                   data-ng-show="vm.error.description.flag  && (vm.projectDescription.length < 30)">
                    {{vm.error.description.message}}
                </p>

                <button id="descriptionOk" class="col-xs-4 col-xs-offset-4 btn btn-primary btn-lg waves-effect m-t-20"
                        data-ng-click="vm.continueProject()"
                        data-ng-disabled="!vm.material || vm.projectDescription.length < 30">
                    Continuer
                </button>

            </div>
            <div class="slide bckg-white" id="slide4" data-ng-show="vm.continue">
                <h2 class="text-center">Ajoutez des photos</h2>

                <div class="row w-900 center no-margin">
                    <div class="col-md-3 no-padding"
                         ngf-drop="uploadFiles($files)"
                         ngf-drag-over-class="dragOverClass($event)"
                         data-ng-model="files"
                         data-ng-multiple="false">
                        <span class=" center img-preview-remove" data-ng-click="photos[0] = {}"
                              data-ng-show="photos[0].public_id"></span>

                        <div class="add-img center" ngf-select="uploadFiles($files, $invalidFiles, 0)"
                             ngf-accept="'image/*'" ngf-max-size="5MB">
                            <a cl-href="{{photos[0].public_id}}" target="_blank" format="png"
                               class="center-midlle"
                               data-ng-show="photos[0].public_id">

                                <cl-image public-id="{{photos[0].public_id}}" secure="true"
                                          class="img-preview center-middle"
                                          format="png">
                                    <cl-transformation height="220" width="220" crop="fill"/>
                                </cl-image>
                            </a>

                            <img class="center-middle" src="icons/mdpi/ic_new_request.png" alt=""
                                 data-ng-hide="photos[0].public_id || vm.imageLoading[0]"/>

                            <img class="center-middle" src="img/loader_small.gif" alt=""
                                 data-ng-show="vm.imageLoading[0]"/>
                        </div>
                        <textarea class="comment custom-comment" data-ng-model="photos[0].description"
                                  data-ng-show="photos[0].public_id" placeholder="Joindre un commentaire"
                                  data-ng-change="vm.limitLength(photos[0], 'description', 140)"></textarea>

                        <div class="comment-length">
                            {{photos[0].description.length}}/140
                        </div>
                    </div>
                    <div class="col-md-3 no-padding" data-ng-if="!photos[0].public_id && !photos[1].public_id">
                        <div class="add-img-disabled center">
                            <img class="center-middle" src="icons/mdpi/ic_disabled.png" alt=""/>
                        </div>
                    </div>
                    <div class="col-md-3 no-padding"
                         data-ng-if="photos[0].public_id || photos[1 ].public_id"
                         ngf-drop="uploadFiles($files)"
                         ngf-drag-over-class="dragOverClass($event)"
                         data-ng-model="files"
                         data-ng-multiple="false">
                        <span class=" center img-preview-remove" data-ng-click="photos[1] = {}"
                              data-ng-show="photos[1].public_id"></span>

                        <div class="add-img center" ngf-select="uploadFiles($files, $invalidFiles, 1)"
                             ngf-accept="'image/*'" ngf-max-size="5MB">
                            <a cl-href="{{photo.public_id}}" format="png" target="_blank" class="center-midlle"
                               data-ng-show="photos[1].public_id">

                                <cl-image public-id="{{photos[1].public_id}}" secure="true"
                                          class="img-preview center-middle"
                                          format="png">
                                    <cl-transformation height="220" width="220" crop="fill"/>
                                </cl-image>
                            </a>
                            <img class="center-middle" src="icons/mdpi/ic_new_request.png" alt=""
                                 data-ng-hide="photos[1].public_id || vm.imageLoading[1]"/>

                            <img class="center-middle" src="img/loader_small.gif" alt=""
                                 data-ng-show="vm.imageLoading[1]"/>
                        </div>
                        <textarea class="comment custom-comment" data-ng-model="photos[1].description"
                                  data-ng-show="photos[1].public_id" placeholder="Comment this photo"
                                  data-ng-change="vm.limitLength(photos[1], 'description', 140)"></textarea>

                        <div class="comment-length">
                            {{photos[1].description.length}}/140
                        </div>
                    </div>
                    <div class="col-md-3 no-padding" data-ng-if="!photos[1].public_id && !photos[2].public_id">
                        <div class="add-img-disabled center">
                            <img class="center-middle" src="icons/mdpi/ic_disabled.png" alt=""/>
                        </div>
                    </div>
                    <div class="col-md-3 no-padding"
                         data-ng-if="photos[1].public_id || photos[2].public_id"
                         ngf-drop="uploadFiles($files)"
                         ngf-drag-over-class="dragOverClass($event)"
                         data-ng-model="files"
                         data-ng-multiple="false">
                        <span class=" center img-preview-remove" data-ng-click="photos[2] = {}"
                              data-ng-show="photos[2].public_id"></span>

                        <div class="add-img center" ngf-select="uploadFiles($files, $invalidFiles, 2)"
                             ngf-accept="'image/*'" ngf-max-size="5MB">
                            <a cl-href="{{photo.public_id}}" format="png" target="_blank" class="center-midlle"
                               data-ng-show="photos[2].public_id">

                                <cl-image public-id="{{photos[2].public_id}}" secure="true"
                                          class="img-preview center-middle"
                                          format="png">
                                    <cl-transformation height="220" width="220" crop="fill"/>
                                </cl-image>
                            </a>
                            <img class="center-middle" src="icons/mdpi/ic_new_request.png" alt=""
                                 data-ng-hide="photos[2].public_id || vm.imageLoading[2]"/>

                            <img class="center-middle" src="img/loader_small.gif" alt=""
                                 data-ng-show="vm.imageLoading[2]"/>
                        </div>
                        <textarea class="comment custom-comment" data-ng-model="photos[2].description"
                                  data-ng-show="photos[2].public_id" placeholder="Comment this photo"
                                  data-ng-change="vm.limitLength(photos[2], 'description', 140)"></textarea>

                        <div class="comment-length">
                            {{photos[2].description.length}}/140
                        </div>
                    </div>
                    <div class="col-md-3 no-padding" data-ng-if="!photos[2].public_id && !photos[3].public_id ">
                        <div class="add-img-disabled center">
                            <img class="center-middle" src="icons/mdpi/ic_disabled.png" alt=""/>
                        </div>
                    </div>
                    <div class="col-md-3 no-padding"
                         data-ng-if="photos[2].public_id || photos[3].public_id"
                         ngf-drop="uploadFiles($files)"
                         ngf-drag-over-class="dragOverClass($event)"
                         data-ng-model="files"
                         data-ng-multiple="false">
                        <span class=" center img-preview-remove" data-ng-click="photos[3] = {}"
                              data-ng-show="photos[3].public_id"></span>

                        <div class="add-img center" ngf-select="uploadFiles($files, $invalidFiles, 3)"
                             ngf-accept="'image/*'" ngf-max-size="5MB">
                            <a cl-href="{{photo.public_id}}" format="png" target="_blank" class="center-midlle"
                               data-ng-show="photos[3].public_id">

                                <cl-image public-id="{{photos[3].public_id}}" secure="true"
                                          class="img-preview center-middle"
                                          format="png">
                                    <cl-transformation height="220" width="220" crop="fill"/>
                                </cl-image>
                            </a>
                            <img class="center-middle" src="icons/mdpi/ic_new_request.png" alt=""
                                 data-ng-hide="photos[3].public_id || vm.imageLoading[3]"/>

                            <img class="center-middle" src="img/loader_small.gif" alt=""
                                 data-ng-show="vm.imageLoading[3]"/>
                        </div>
                        <textarea class="comment custom-comment" data-ng-model="photos[3].description"
                                  data-ng-show="photos[3].public_id"
                                  data-ng-change="vm.limitLength(photos[3], 'description', 140)"
                                  placeholder="Comment this photo"></textarea>

                        <div class="comment-length">
                            {{photos[3].description.length}}/140
                        </div>
                    </div>
                </div>
                <button type="button" class="new-project-continue btn" data-ng-click="vm.continueProjectImg()">
                    Continue
                </button>
            </div>
            <div class="slide bckg-default" id="slide5" data-ng-show="vm.continueImg">
                <h2 class="text-center mb-39">Indiquez l'adresse des travaux ?</h2>

                <h3 class="text-center mb-60" data-ng-show="!vm.newAddrFlag">Choisissez une de vos adresses ou
                    indiquez-en
                    une nouvelle</h3>

                <h3 class="text-center mb-60" data-ng-show="vm.newAddrFlag">Indiquez un nom puis précisez votre
                    adresse</h3>

                <div class="row no-margin w-900 center select-addr">
                    <div class="col-md-4 no-padding" data-ng-if="vm.user.addresses.length>0">
                        <select class="select-custom" data-ng-model="vm.myAddress" data-ng-change="vm.setAddress()">
                            <option value="new">- Nouvelle adresse -</option>
                            <option data-ng-repeat="a in vm.user.addresses" value="{{a.address}}"
                                    data-ng-selected="a.address.toString() == vm.myAddress.toString()">{{a.name}}
                            </option>
                        </select>
                    </div>
                    <div class="col-md-4 no-padding" data-ng-if="vm.user.addresses.length>0">
                        <p class="">
                            - Ou ajouter une nouvelle adresse :
                        </p>
                    </div>
                    <div class="col-md-4 no-padding">
                        <input type="text" class="select-custom" data-ng-model="vm.newAddr.name"
                               data-ng-change="vm.verifNameAddr()"
                               placeholder="Nom de l'adresse (Maison, Papa, ...)">
                    </div>
                </div>
                <div class="row no-margin w-900 center addr">
                    <div class="no-padding mb-39" data-ng-class="col-xs-12">
                        <div class="inner-addon right-addon">
                            <div class="disabled-addr" data-ng-show="vm.disabledAddr"></div>
                            <i class="glyphicon glyphicon-map-marker"></i>
                            <input vs-google-autocomplete="options"
                                   options="options"
                                   data-ng-model="address.name"
                                   vs-place="address.place"
                                   vs-place-id="address.components.placeId"
                                   vs-street-number="address.components.streetNumber"
                                   vs-street="address.components.street"
                                   vs-city="address.components.city"
                                   vs-state="address.components.state"
                                   vs-country-short="address.components.countryCode"
                                   vs-country="address.components.country"
                                   vs-post-code="address.components.postCode"
                                   vs-district="address.components.district"
                                   vs-latitude="address.components.location.lat"
                                   vs-longitude="address.components.location.long"
                                   type="text"
                                   name="address"
                                   id="address"
                                   placeholder="Indiquez votre adresse complète (vous seul décidez quand et par qui elle sera visible)"
                                   class="input-custom">
                        </div>

                    </div>
                </div>
                <p class="error center" data-ng-show="vm.error.address.flag">
                    {{vm.error.address.message}}
                </p>
                <button type="button" class="new-project-continue btn" data-ng-click="vm.continueAddr()">Continue
                </button>
            </div>
            <div class="slide bckg-white" id="slide6" data-ng-show="vm.continueAddressFlag">
                <h2 class="text-center">Quand voulez-vous que les travaux commencent ?</h2>

                <div>
                    <ul class="questions-ul center no-padding">
                        <li class="question-li center" data-ng-class="vm.child3"
                            data-ng-click="vm.selectDateType('NONE'); vm.child0 = ''; vm.child1 = ''; vm.child2 = ''; vm.child3 = 'activate'">
                            Dès que possible
                        </li>
                        <li class="question-li center" data-ng-class="vm.child2"
                            data-ng-click="vm.selectDateType('WITHIN_A_MONTH'); vm.child0 = ''; vm.child1 = ''; vm.child2 = 'activate'; vm.child3 = ''">
                            Dans le mois
                        </li>
                        <li data-ng-show="vm.dateType == 'WITHIN_A_MONTH'"
                            class="custom-li-date question-li center date">
                            Avant le {{vm.desiredDateMonth | date:'dd MMMM'}}
                        </li>
                        <li class="question-li center" data-ng-class="vm.child0"
                            data-ng-click="vm.selectDateType('SPECIFIC'); vm.selectDate(); vm.child0 = 'activate'; vm.child1 = ''; vm.child2 = ''; vm.child3 = ''">
                            À partir d'une date
                        </li>
                        <li data-ng-show="vm.dateSelected" class="custom-li-date question-li center"
                            data-ng-click="vm.unSelectdate()">
                            {{vm.dt | date:'dd-MM-yyyy'}}
                        </li>
                        <li data-ng-show="vm.dateFlag">
                            <div style="display:inline-block; min-height:290px;" class="center custom-picker">
                                <uib-datepicker data-ng-model="vm.dt" datepicker-options="vm.datepickerOptions"
                                                class="well well-sm custom-date"
                                                custom-class="getDayClass(date, mode)"></uib-datepicker>
                            </div>
                        </li>
                    </ul>
                    <p class="error center" data-ng-show="vm.error.date.flag">
                        {{vm.error.date.message}}
                    </p>
                </div>
                <button type="button" class="new-project-continue btn" data-ng-click="vm.post()"
                        data-ng-disabled="!vm.dateType">
                    PUBLIER
                </button>
            </div>
        </div>
    </div>
</section>
