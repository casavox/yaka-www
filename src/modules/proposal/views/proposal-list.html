<style type="text/css">
    #map_canvas {
        height: 70px;
        margin: 0px;
        margin-left: -15px;
        margin-right: -15px;
    }

    #map_canvas {
        position: relative;
    }

    .angular-google-map-container {
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        left: 0;
    }
</style>
<section class="view" ng-cloak>
    <div class="header-menu">
        <ng-include src="'/modules/core/modules/menu/views/menuHamburger.html'"></ng-include>
        <div class="in-line min-w-44 arrow-nav" ui-sref="my-projects">
            <img src="icons/mdpi/arrow-left.png" class="center-middle"/>
        </div>
        <div class="title no-line">
            {{vm.project.title}}
            <p class="sub-title-proposal">
                Proposals
            </p>
        </div>
        <a ng-click="app.logout()">
            <div class="logout">
                Log Out
            </div>
        </a>
    </div>

    <section id="content">
        <div class="container" style="margin-top: 100px;">
            <div class="card" ng-click="vm.projectDetails()">
                <div class="card-header blue-card-hover">
                    <div class="media">
                        <div class="pull-left">
                            <div class="proposalIconBackground">
                                <img class="lv-img v-icon-{{vm.project.activities[0].code}}-white" alt="">
                            </div>
                        </div>
                        <div class="media-body m-t-5">
                            <h2>{{vm.project.title}}</h2>
                            <h2>
                                <small><i>{{vm.project.address.name}} - {{vm.project.address.administrativeAreaLevel2
                                    }}</i>
                                </small>
                            </h2>
                            <small>Echéance : {{vm.getWhen()}}</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card projectCreated" ng-show="!vm.project.proposals || vm.project.proposals.length == 0">
                <div class="card pt-inner ">
                    <div class="pti-header bgm-lightblue">
                        <h2>Votre projet est correctement créé !</h2>
                        <div class="ptih-title">Nous avons communiqué votre projet aux professionnels de votre secteur
                        </div>
                    </div>

                    <div class="pti-body">
                        <div class="ptib-item">
                            <h3>Vous allez bientôt recevoir plusieurs offres</h3>
                            <br>
                            <h4 style="text-align: justify;">
                                Vous pourrez alors voir celles qui vous intéressent, et discuter par messagerie
                                instantanée - et privée - avec chaque professionnel.
                                <ul>
                                    <li class="ng-binding" style="font-size: 15px !important;">Par défaut vos
                                        coordonnées personnelles sont masquées (Nom, téléphone, adresse, email,
                                        ...).
                                    </li>
                                    <li class="ng-binding" style="font-size: 15px !important;">Vous pouvez à
                                        tout moment décider de communiquer vos coordonnées à un professionnel
                                        :<br>Pour cela il suffit de l'ajouter dans votre <a ui-sref="contacts">liste
                                            de contacts</a>.
                                    </li>
                                </ul>
                                </li>
                                <p>Puis, sélectionnez le professionnel de votre choix et bloquez une date pour démarrer
                                    le
                                    chantier.</p>
                            </h4>
                        </div>
                        <div class="ptib-item">
                            Invitez vos amis à rejoindre Yaka Club pour augmenter vos chances de trouver le
                            professionnel du batiment qu'il vous faut.
                        </div>
                    </div>

                    <div class="pti-footer">
                        <button class="btn bgm-lightblue" ui-sref="contacts">Inviter des amis</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div ng-show="vm.project.proposals && vm.project.proposals.length > 0">
        <div class="detail-pro-title">
            <div class="in-line">
                OFFRES RECUES
            </div>
            <hr>
        </div>
        <div class="proposal" ng-repeat="p in vm.project.proposals" ng-click="vm.selectProposal(p)">
            <div class="row no-margin no-padding">
                <div class="col-xs-12 row">
                    <div class="proposals-profile-pict">
                        <cl-image public-id="{{p.professional.user.avatar.cloudinaryPublicId}}"
                                  secure="true"
                                  class="img-circle" format="png">
                            <cl-transformation height="70" width="70" crop="fill"/>
                        </cl-image>
                        <div class="img-default" ng-if="!p.professional.user.avatar.cloudinaryPublicId">
                            {{p.professional.user.firstName[0] | uppercase}} {{p.professional.user.lastName[0] |
                            uppercase}}
                        </div>
                    </div>
                    <div class="proposals-info">
                        <div class="proposals-name">
                    <span
                        ng-if="p.status == 'START'">{{p.professional.user.firstName}} {{p.professional.user.lastName}}</span><span
                            ng-if="p.status == 'SELECTED'">{{p.professional.company.name}}</span>
                        </div>
                        <div class="proposals-qualities"><span
                            ng-repeat="q in p.professional.qualities">{{ q.name }} <span
                            ng-if="!$last"> - </span></span></div>
                        <div class="pro-title-icon">
                            <img src="icons/mdpi/ic_like_empty.png" class="icon-like"/>

                            <div class="likes">
                                {{p.professional.likes}} <span
                                ng-if="!p.professional.likes || p.professional.likes == 0"> - </span>
                            </div>
                            <img src="icons/mdpi/ic_background_checked.png" class="icon-verification"
                                 ng-if="vm.indexOfObject('BACKGROUND_CHECK', 'name', p.professional.verifications).length > 0"/>
                            <img src="icons/mdpi/suggestion.png" class="icon-suggestion"/>
                        </div>
                    </div>
                    <div class="proposals-message-price">
                        <img src="icons/mdpi/ic_message.png" class="proposals-unread"
                             ng-if="p.unreadMessages"/>

                        <div class="proposals-price" ng-if="p.price">
                            {{p.price}} €
                        </div>
                        <div class="proposals-price-type" ng-if="p.price">
                            {{p.priceType}}
                        </div>
                        <div ng-if="!p.price" class="proposals-more-info">
                            Need more info
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


